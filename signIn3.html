<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">   
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no"> 
	<title>签到有礼</title>
	<link rel="stylesheet" type="text/css" href="css/signIn.css">
	
	<script type="text/javascript" src="js/lib/setFontSize.min.js"></script>
	<script type="text/javascript" src="./js/lib/jquery-1.8.3.min.js"></script>
</head>
<body>
<div class="container" id="signInBox">
	<div class="" style="height:3.42rem;">
		<p>当前蚂蚁豆：<b>200</b></p>
	</div>
	<div class="signIn-path">
		<canvas id="canvas" width="320" height="320">您的浏览器不支持 HTML5 canvas 标签！</canvas>
		<div class="path-items">
			<div class="Ant-Man" id="Ant-Man"><img src="images/signIn/signIn_ant.png" id="antImg"></div>
			<ul class="datyMain">
				<li class="dayOne doing">
					<span class="dayTxt">第一天</span>
					<span class="signIn-Btn">点击签到</span>
				</li>
				<li class="dayTwo">
					<span class="dayTxt">第二天</span>
					<span class="signIn-Btn">点击签到</span>
				</li>
				<li class="dayThree done">
					<span class="dayTxt">第三天</span>
					<span class="signIn-Btn">点击签到</span>
				</li>
				<li class="dayFour">
					<span class="dayTxt">第四天</span>
					<span class="signIn-Btn">点击签到</span>
				</li>				
				<li class="dayFive">
					<span class="dayTxt">第五天</span>
					<span class="signIn-Btn">点击签到</span>
				</li>
				<!-- <li class="daySix">
					<span class="dayTxt">第六天</span>
					<span class="signIn-Btn">点击签到</span>
				</li>
				<li class="daySeventh">
					<span class="dayTxt">第七天</span>
					<span class="signIn-Btn">点击签到</span>
				</li> -->
			</ul>
		</div>
	</div>
</div>

<script type="text/javascript">
var arr1 = [{ moveX: 30, moveY: 32, toX: 100, toY: 52 },
			{ moveX: 40, moveY: 30, toX: 10, toY: 0 }];



var lock = true;
$(".datyMain").on("click",".signIn-Btn",function(){
	var idx = $(this).parent().index()+1;
	$(this).parent().addClass("done").removeClass("doing");

	var AntMan = $("#Ant-Man").find("img"),
    	imgSrc = $(AntMan).attr("src");

    //draw( imgSrc,AntMan.width(),AntMan.height() );
    drawFn( imgSrc )

	console.log( AntMan.width(),AntMan.height() );
})

var ctx = null;
var img = null;
var timer = null;
function drawFn( imgSrc ){
	var cvs = document.getElementById("canvas");
	ctx = cvs.getContext("2d");
	//console.log( cvs.width,cvs.height )

	img = new Image();

    img.onload = function() {
    	img.width = img.width/2;
    	img.height = img.height/2;
        console.log( img.width, img.height );
        setInterval('moveFn()', 500);
    };

    img.src = imgSrc;
}

var canvas_size_x = 375;
var canvas_size_y = 667;

var x_icon = 0;
var y_icon = 0;

function moveFn(){
	ctx.clearRect(0, 0, canvas_size_x, canvas_size_y);
	x_icon += 1;
    y_icon += .5;

    if( x_icon>=100||y_icon>=52 ){
    	x_icon = 100;
    	y_icon = 52;
    	console.log( x_icon,y_icon  )
    }
    ctx.drawImage( img, x_icon, y_icon, 53, 79);
}
</script>
</body>
</html>